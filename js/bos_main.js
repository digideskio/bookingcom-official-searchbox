(function(c,a){var b={};b.name="Strategic Partnerships namespace";b.gElm=function(d){return(d)?c.getElementById(d):false};b.utils={name:"Strategic Partnerships namespace: Utilities",fileLoaded:true,loadQue:function(e){var f=(this===a)?b.utils:this,d=function(){if(f.fileLoaded){f.loadFile(e[0]);if(e.length>0){e.shift()}}if(e.length>0){setTimeout(d,100)}};d();return f},loadFile:function(e){var f=(this===a)?b.utils:this,d;f.fileLoaded=false;d=c.createElement("script");d.src=e;d.onload=function(){f.fileLoaded=true};d.onreadystatechange=function(){f.fileLoaded=true};c.getElementsByTagName("head")[0].appendChild(d);return f},init:function(){var e=(this===a)?b.utils:this,d=function(){if(e.fileLoaded){setStage();a.search_autocomplete.init();jQuery("#b_destination").autocomplete({matchContains:true,max:100,minChars:2})}else{setTimeout(d,100)}};d();return e},getFiles:function(d){var e=(this===a)?b.utils:this;if(d){e.loadQue(d)}return e}};b.validation={validSearch:function(){var d=this;if(!d.checkDestination()){return false}if(!d.checkDates()){return false}return true},checkDestination:function(){var d=b.gElm("b_destination").value||"";if(d){return true}this.showFormError(b.vars.errors.destinationErrorMsg,"searchBox_error_msg");return false},checkDates:function(){var k=b.gElm,l=parseInt(k("b_checkin_day").value),f=k("b_checkin_month").value,r=f.split(/-/),g=new Date(r[0],r[1],l),i=parseInt(k("b_checkout_day").value),m=k("b_checkout_month").value,j=m.split(/-/),p=new Date(j[0],j[1],i),q=b.vars.gen.b_todays_date.split(/-/),o=k("b_checkin_input")||false,d=o&&o.offsetWidth?true:false;textCheckOut=k("b_checkout_input")||false;textCheckOutShown=o&&o.offsetWidth?true:false;if(d){var h=o.value.split("/");if(o.match(/[A-z]/)){this.showFormError(b.vars.errors.tooManyDays,"searchBox_dates_error_msg");return false}if(parseInt(h[0])>31){this.showFormError(b.vars.errors.tooManyDays,"searchBox_dates_error_msg");return false}if(parseInt(h[1])>12){this.showFormError(b.vars.errors.tooManyDays,"searchBox_dates_error_msg");return false}}if(textCheckOutShown){var n=textCheckOut.value.split("/");if(textCheckOut.match(/[A-z]/)){this.showFormError(b.vars.errors.tooManyDays,"searchBox_dates_error_msg");return false}if(parseInt(n[0])>31){this.showFormError(b.vars.errors.tooManyDays,"searchBox_dates_error_msg");return false}if(parseInt(n[1])>12){this.showFormError(b.vars.errors.tooManyDays,"searchBox_dates_error_msg");return false}}if(parseInt(j[1])===parseInt(q[1])&&l<parseInt(q[2])){this.showFormError(b.vars.errors.dateInThePast,"searchBox_dates_error_msg");return false}if(i<=l&&m<=f){this.showFormError(b.vars.errors.cObeforeCI,"searchBox_dates_error_msg");return false}if((p-g)/(1000*60*60*24)>30){this.showFormError(b.vars.errors.tooManyDays,"searchBox_dates_error_msg");return false}return true},showFormError:function(f,d){if(!f||!d){return false}var e=c.getElementById(d),g=function(){jQuery(e).fadeOut("default")};e.innerHTML=f;e.style.cursor="pointer";jQuery(e).fadeIn("default",function(){var h=this;if(h.addEventListener){h.addEventListener("click",g,false)}if(h.attachEvent){h.attachEvent("onclick",g)}setTimeout(g,5000)})}};a.sp=b;a.e=b.gElm})(document,window);